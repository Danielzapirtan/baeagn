<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FEN Chess Board Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            padding: 8px 16px;
            background-color: #4a5568;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #2d3748;
        }
        
        #fen-input {
            width: 400px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .board-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .board {
            display: grid;
            grid-template-columns: repeat(8, 40px);
            grid-template-rows: repeat(8, 40px);
            border: 2px solid #333;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .square {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            font-weight: bold;
            cursor: default;
            user-select: none;
        }
        
        .light {
            background-color: cyan;
        }
        
        .dark {
            background-color: green;
        }
        
        .coordinates {
            display: flex;
            width: 320px;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .file-coordinates, .rank-coordinates {
            display: flex;
            font-weight: bold;
        }
        
        .file-coordinates div, .rank-coordinates div {
            width: 60px;
            text-align: center;
        }
        
        .white-piece {
            color: red;
        }
        
        .black-piece {
            color: blue;
        }
        
        .status {
            margin-top: 20px;
            padding: 10px;
            background-color: white;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <h1>FEN Chess Board Viewer</h1>
    
    <div class="controls">
        <input type="text" id="fen-input" placeholder="Paste FEN notation here">
        <button id="load-fen">Load FEN</button>
        <button id="reset-board">Reset to Initial Position</button>
        <button id="flip-board">Flip Board</button>
    </div>
    
    <div class="board-container">
        <div class="coordinates file-coordinates" id="file-coordinates">
            <div>a</div><div>b</div><div>c</div><div>d</div><div>e</div><div>f</div><div>g</div><div>h</div>
        </div>
        
        <div class="board" id="chess-board">
            <!-- Board squares will be generated by JavaScript -->
        </div>
        
        <div class="coordinates rank-coordinates" id="rank-coordinates">
            <div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div>
        </div>
    </div>
    
    <div class="status" id="status">
        Ready to load FEN notation.
    </div>

    <script>
        // Initial FEN for standard chess starting position
        const INITIAL_FEN = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";
        
        // Piece symbols to Unicode characters
        const PIECE_SYMBOLS = {
            'K': '♔', 'Q': '♕', 'R': '♖', 'B': '♗', 'N': '♘', 'P': '♙',
            'k': '♚', 'q': '♛', 'r': '♜', 'b': '♝', 'n': '♞', 'p': '♟'
        };
        
        let currentFen = INITIAL_FEN;
        let boardFlipped = false;
        
        // DOM elements
        const boardElement = document.getElementById('chess-board');
        const fenInput = document.getElementById('fen-input');
        const loadFenButton = document.getElementById('load-fen');
        const resetBoardButton = document.getElementById('reset-board');
        const flipBoardButton = document.getElementById('flip-board');
        const statusElement = document.getElementById('status');
        const fileCoordinates = document.getElementById('file-coordinates');
        const rankCoordinates = document.getElementById('rank-coordinates');
        
        // Initialize the board
        function initializeBoard() {
            boardElement.innerHTML = '';
            
            // Create 64 squares
            for (let i = 0; i < 64; i++) {
                const square = document.createElement('div');
                square.className = 'square';
                square.id = `square-${i}`;
                
                // Determine if square is light or dark
                const row = Math.floor(i / 8);
                const col = i % 8;
                const isLight = (row + col) % 2 === 0;
                
                square.classList.add(isLight ? 'light' : 'dark');
                boardElement.appendChild(square);
            }
            
            updateBoard();
        }
        
        // Parse FEN and update the board
        function updateBoard() {
            try {
                // Parse FEN string
                const fenParts = currentFen.split(' ');
                const position = fenParts[0];
                
                // Clear all squares
                for (let i = 0; i < 64; i++) {
                    const square = document.getElementById(`square-${i}`);
                    square.textContent = '';
                    square.classList.remove('white-piece', 'black-piece');
                }
                
                // Place pieces on the board
                let rank = 0; // FEN starts from rank 8 (top)
                let file = 0;
                
                for (let i = 0; i < position.length; i++) {
                    const char = position[i];
                    
                    if (char === '/') {
                        // Move to next rank
                        rank++;
                        file = 0;
                    } else if (isNaN(char)) {
                        // It's a piece
                        const squareIndex = boardFlipped ? 
                            (7 - rank) * 8 + (7 - file) : 
                            rank * 8 + file;
                        
                        const square = document.getElementById(`square-${squareIndex}`);
                        square.textContent = PIECE_SYMBOLS[char] || char;
                        
                        // Set piece color
                        if (char === char.toUpperCase()) {
                            square.classList.add('white-piece');
                        } else {
                            square.classList.add('black-piece');
                        }
                        
                        file++;
                    } else {
                        // It's a number (empty squares)
                        file += parseInt(char);
                    }
                }
                
                statusElement.textContent = 'Board updated successfully.';
            } catch (error) {
                statusElement.textContent = 'Error parsing FEN: ' + error.message;
            }
        }
        
        // Flip the board view
        function flipBoard() {
            boardFlipped = !boardFlipped;
            
            // Update file coordinates
            const files = boardFlipped ? ['h', 'g', 'f', 'e', 'd', 'c', 'b', 'a'] : ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];
            const fileElements = fileCoordinates.children;
            for (let i = 0; i < fileElements.length; i++) {
                fileElements[i].textContent = files[i];
            }
            
            // Update rank coordinates
            const ranks = boardFlipped ? ['1', '2', '3', '4', '5', '6', '7', '8'] : ['8', '7', '6', '5', '4', '3', '2', '1'];
            const rankElements = rankCoordinates.children;
            for (let i = 0; i < rankElements.length; i++) {
                rankElements[i].textContent = ranks[i];
            }
            
            updateBoard();
        }
        
        // Event listeners
        loadFenButton.addEventListener('click', () => {
            const fen = fenInput.value.trim();
            if (fen) {
                currentFen = fen;
                updateBoard();
                statusElement.textContent = 'FEN loaded successfully.';
            } else {
                statusElement.textContent = 'Please enter a FEN string.';
            }
        });
        
        resetBoardButton.addEventListener('click', () => {
            currentFen = INITIAL_FEN;
            fenInput.value = currentFen;
            updateBoard();
            statusElement.textContent = 'Board reset to initial position.';
        });
        
        flipBoardButton.addEventListener('click', flipBoard);
        
        // Initialize the application
        fenInput.value = INITIAL_FEN;
        initializeBoard();
    </script>
</body>
</html>
